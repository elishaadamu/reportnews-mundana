<h4 class="font-weight-bold spanborder"><span>Latest Alerts</span></h4>
<div class="sticky-top sticky-top-offset">
    <div id="output-latest-sidebar"></div>
</div>  


<script>
const apiUrl = 'https://back.3blmedia.com/rest/report-announcement/latest-reports?page=0';
const outputElement = document.getElementById('output-latest-sidebar');

// Function to truncate text
function truncateText(text, maxLength) {
  if (text.length <= maxLength) {
    return text;
  }
  return text.slice(0, maxLength) + '...';
}

fetch(apiUrl)
  .then(response => {
    if (!response.ok) {
      throw new Error('Network response was not ok');
    }
    return response.json();
  })
  .then(data => {
    // Clear the output element
    outputElement.innerHTML = '';

    // Display only the first 5 data in HTML elements
    data.results.slice(0, 5).forEach(report => {
      let truncatedTitle = truncateText(report["report-title"], 80); // Truncate title to 80 characters

      let reportElement = document.createElement('div');
      reportElement.classList.add('report');
      reportElement.innerHTML = `
        <ul class="list-featured" style="list-style-type: none !important;">
          <li class="mb-4">
            <a href="https://back.3blmedia.com${report["url-alias"]}">
              <img src="${report["report-image"]}" alt="${report["report-title"]}" width="200px" height="auto">
            </a>
            <br>
            <br>
            <span>
              <h6 class="font-weight-bold">
                <a class="text-dark" href="https://back.3blmedia.com${report["url-alias"]}">${truncatedTitle}</a>
              </h6>
            </span>
            <p style="color: grey; font-size: medium;">
              ${report["published-date"]}
            </p>
          </li>
        </ul>
      `;
      outputElement.appendChild(reportElement);
    });
  })
  .catch(error => {
    console.error('Error:', error);
    outputElement.textContent = 'An error occurred while fetching the data.';
  });

  
</script>