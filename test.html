<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dynamic Report Links</title>
</head>
<body>

<div id="reportLinksContainer"></div>

<script>
// Function to fetch reports and display links
async function displayReportLinks() {
    try {
        // Fetch the latest reports from the API
        const response = await fetch('https://back.3blmedia.com/rest/report-announcement/latest-reports?page=0');
        const data = await response.json();

        // Get the container to append the links
        const container = document.getElementById('reportLinksContainer');

        // Loop through each report in the results
        data.results.forEach(report => {
            // Extract the report ID and URL alias
            const reportID = report.report_id;
            const urlAlias = report['url-alias'];
            const newURL = `http://127.0.0.1:4000/reportnews-mundana${urlAlias}`;

            // Create a new anchor tag
            const anchor = document.createElement('a');
            anchor.href = newURL;
            anchor.textContent = `Report: ${report['report-title']}`;
            anchor.target = '_blank'; // Open link in a new tab

            // Create a new paragraph to hold the anchor tag
            const paragraph = document.createElement('p');
            paragraph.appendChild(anchor);

            // Append the paragraph to the container
            container.appendChild(paragraph);
        });
    } catch (error) {
        console.error('Error fetching or processing data:', error);
    }
}

// Call the function when the page loads
window.onload = displayReportLinks;
</script>

</body>
</html>
